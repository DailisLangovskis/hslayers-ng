define(["angular","moment"],function(angular,n){n.locale("cs",{months:"leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),monthsShort:"led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_")}),angular.module("hs.calendar",[]).directive("calendar",function(){function e(n){return n.hour(0).minute(0).second(0).millisecond(0)}function t(e,t,a){e.weeks=[],e.start=n(t);for(var c=!1,d=t.clone(),l=d.month(),r=0;!c;)e.weeks.push({days:o(d.clone(),a)}),d.add(1,"w"),c=r++>2&&l!==d.month(),l=d.month()}function o(n,e){for(var t=[],o=0;o<7;o++)t.push({name:n.format("dd").substring(0,1),number:n.date(),isCurrentMonth:n.month()===e.month(),isToday:n.isSame(new Date,"day"),date:n}),(n=n.clone()).add(1,"d");return t}return{restrict:"E",templateUrl:"partials/calendar.html",scope:{selected:"="},link:function(o){o.selected=e(o.selected||n()),o.month=o.selected.clone();var a=o.selected.clone();a.date(1),e(a.day(1)),t(o,a,o.month),o.select=function(n){if(o.rangeContains(n.date)){o.selected=n.date;var a=o.selected.clone();a.date(1),e(a.day(1)),o.month=o.selected.clone(),t(o,a,o.month)}},o.rangeContains=o.$parent.rangeContains,o.next=function(){var n=o.month.clone();n.month(n.month()+1),n.date(1),e(n.day(1)),o.month.month(o.month.month()+1),t(o,n,o.month)},o.previous=function(){var n=o.month.clone();n.month(n.month()-1),n.date(1),e(n.day(1)),o.month.month(o.month.month()-1),t(o,n,o.month)},o.$on("day.changed",function(n,e){var t={};t.date=e,o.select(t)}),o.$on("language.changed",function(e,t){n.locale(t),o.month.locale(t)})}}})});