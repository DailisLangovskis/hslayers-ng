define(["angular","app","map","ol"],function(angular,e,o,ol){angular.module("hs.wirecloud",["hs","hs.map"]).service("hs.wirecloud.service",["$rootScope","hs.map.service","config",function(e,o,r,t){var a=o.map.getView();if(console&&console.log("Wirecloud interface loaded"),"undefined"!=typeof MashupPlatform&&angular.isDefined(r.default_layers)){var n=r.default_layers[2];e.$on("browserurl.updated",function(e){var o=a.getCenter();o=ol.proj.transform(o,a.getProjection(),"EPSG:4326"),MashupPlatform.wiring.pushEvent("center_event",o[0]+", "+o[1])}),MashupPlatform.wiring.registerCallback("center_slot",function(e){console&&console.log("center_slot",e),a.setCenter([parseFloat(e.split(",")[0]),parseFloat(e.split(",")[1])])}),MashupPlatform.wiring.registerCallback("draw_extent_slot",function(e){console&&console.log("draw_extent_slot",e);var r=e.split(","),t=[parseFloat(r[0]),parseFloat(r[1])],l=[parseFloat(r[2]),parseFloat(r[3])];t=ol.proj.transform(t,"EPSG:4326",a.getProjection()),l=ol.proj.transform(l,"EPSG:4326",a.getProjection());var s=[t[0],t[1],l[0],l[1]];a.fit(s,o.map.getSize()),n.getSource().clear();var i={};i.geometry=ol.geom.Polygon.fromExtent(s),n.getSource().addFeatures([new ol.Feature(i)])}),MashupPlatform.wiring.registerCallback("location_info_slot",function(e){console&&console.log("location_info_slot",e)})}}]).run(["hs.wirecloud.service",function(e){}])});