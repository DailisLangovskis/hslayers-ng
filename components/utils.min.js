define(["angular","app","ol"],function(angular,t,ol){angular.module("hs.utils",["hs"]).service("hs.utils.service",["config",function(t){function e(t){var e=document.createElement("a");return e.setAttribute("href",t),e.port}this.proxify=function(t,r){r=!!angular.isUndefined(r)||r;var n=t;return("http"==t.substring(0,4)&&-1==t.indexOf(window.location.origin)||e(t)!=window.location.port)&&("undefined"!=typeof use_proxy&&!0!==use_proxy||(n="/cgi-bin/hsproxy.cgi?",r&&(-1==t.indexOf("GetMap")||t.indexOf("GetFeatureInfo")>-1)&&(n+="toEncoding=utf-8&"),n=n+"url="+encodeURIComponent(t))),n},this.parseHexString=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},this.createHexString=function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},this.getParamsFromUrl=function(t){return"string"!=typeof t?{}:t.indexOf("?")>-1?(t=t.substring(t.indexOf("?")+1)).trim().split("&").reduce(function(t,e){var r=e.replace(/\+/g," ").split("="),n=r[0],o=r[1];return n=decodeURIComponent(n),o=void 0===o?null:decodeURIComponent(o),t.hasOwnProperty(n)?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o,t},{}):{}},this.paramsToURL=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")},this.paramsToURLWoEncode=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return e.join("&")},this.generateUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},Date.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},Date.getDaysInMonth=function(t,e){return[31,Date.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},Date.prototype.isLeapYear=function(){return Date.isLeapYear(this.getFullYear())},Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},Date.prototype.addMonths=function(t){var e=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(e,this.getDaysInMonth())),this},Date.prototype.toCzechDateString=function(){return this.getDate()+". "+this.getMonth()+". "+this.getFullYear()},Date.prototype.monthDiff=function(t){var e;return e=12*(t.getFullYear()-this.getFullYear()),e-=this.getMonth()+1,e+=t.getMonth(),e<=0?0:e},String.prototype.hashCode=function(){var t=0;if(0==this.length)return t;for(i=0;i<this.length;i++)char=this.charCodeAt(i),t=(t<<5)-t+char,t&=t;return t},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)},String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,r){return void 0!==t[r]?t[r]:e})}),String.prototype.capitalizeFirstLetter||(String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)})}]).service("hs.utils.layerUtilsService",["config",function(t){var e=this;this.layerIsZoomable=function(t){return void 0!==t&&(!!t.get("BoundingBox")||(!!e.isLayerWMS(t)||!(!t.getSource().getExtent||!t.getSource().getExtent()||ol.extent.isEmpty(t.getSource().getExtent()))))},this.layerIsStyleable=function(t){return void 0!==t&&t instanceof ol.layer.Vector},this.isLayerQueryable=function(t){return!!(t instanceof ol.layer.Tile&&t.getSource()instanceof ol.source.TileWMS&&t.getSource().getParams().INFO_FORMAT)||!!(t instanceof ol.layer.Image&&t.getSource()instanceof ol.source.ImageWMS&&t.getSource().getParams().INFO_FORMAT)},this.isLayerWMS=function(t){return t instanceof ol.layer.Tile&&t.getSource()instanceof ol.source.TileWMS||t instanceof ol.layer.Image&&t.getSource()instanceof ol.source.ImageWMS},this.layerLoaded=function(t){return t.getSource().loaded},this.layerInvalid=function(t){return t.getSource().error}}])});