angular.module("gettext").factory("gettextCatalog",function(t,n,r,e,a){function s(){a.$broadcast("gettextLanguageChanged")}var g,u='<span title="test" class="tested">test</span>',i=angular.element("<span>"+u+"</span>").html()!==u,o=function(t){return g.debug&&g.currentLanguage!==g.baseLanguage?g.debugPrefix+t:t},c=function(t){return g.showTranslatedMarkers?g.translatedMarkerPrefix+t+g.translatedMarkerSuffix:t};return g={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:r("strings"),setCurrentLanguage:function(t){this.currentLanguage=t,s()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(t,n){this.strings[t]||(this.strings[t]={});for(var r in n){var e=n[r];if(i&&(r=angular.element("<span>"+r+"</span>").html()),angular.isString(e)||angular.isArray(e)){var a={};a.$$noContext=e,e=a}for(var g in e){var u=e[g];e[g]=angular.isArray(u)?u:[u]}this.strings[t][r]=e}s()},getStringForm:function(t,n,r){return(((this.strings[this.currentLanguage]||{})[t]||{})[r||"$$noContext"]||[])[n]},getString:function(t,n,r){return t=this.getStringForm(t,0,r)||o(t),t=n?e(t)(n):t,c(t)},getPlural:function(n,r,a,s,g){var u=t(this.currentLanguage,n);return r=this.getStringForm(r,u,g)||o(1===n?r:a),s&&(s.$count=n,r=e(r)(s)),c(r)},loadRemote:function(t){return n({method:"GET",url:t,cache:g.cache}).success(function(t){for(var n in t)g.setStrings(n,t[n])})}}});